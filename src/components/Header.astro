---
import { getImagePath } from '../utils/paths.js';

// base 경로를 고려한 URL 생성 함수
function getPageUrl(path) {
  const basePath = import.meta.env.BASE_URL || '/';
  const cleanPath = path.startsWith('/') ? path : `/${path}`;
  return `${basePath.endsWith('/') ? basePath.slice(0, -1) : basePath}${cleanPath}`;
}

const buildlinkUrl = getPageUrl('/buildlink');
const homeUrl = getPageUrl('/');

// 현재 페이지 확인
const currentPath = Astro.url.pathname;
const isHomePage = currentPath === '/' || currentPath === homeUrl || currentPath.endsWith('/index.html');
---

<header class="fixed w-full bg-white shadow-md z-50 transition-all duration-300">
  <div class="header-container flex justify-between items-center py-5 px-[8%] max-w-[1400px] mx-auto">
    <div class="logo text-[28px] font-bold text-primary relative">
      <a href={getPageUrl('/')} class="flex items-center">
        <span class="inline-block w-[8px] h-[28px] bg-gradient-to-r from-accent to-accent-2 mr-[10px] rounded-[2px]"></span>
        Do-<span class="gradient-text">Ing</span>
      </a>
    </div>
    <nav>
      <ul class="flex">
        <li class="ml-[30px] font-medium relative">
          <a href={isHomePage ? "#home" : `${homeUrl}#home`} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">Home</a>
        </li>
        <li class="ml-[30px] font-medium relative">
          <a href={isHomePage ? "#services" : `${homeUrl}#services`} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">Services</a>
        </li>
        <li class="ml-[30px] font-medium relative">
          <a href={isHomePage ? "#about" : `${homeUrl}#about`} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">About</a>
        </li>
        <li class="ml-[30px] font-medium relative">
          <a href={isHomePage ? "#projects" : `${homeUrl}#projects`} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">Projects</a>
        </li>
        <li class="ml-[30px] font-medium relative">
          <a href={buildlinkUrl} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">BuildLink</a>
        </li>
        <li class="ml-[30px] font-medium relative">
          <a href={isHomePage ? "#contact" : `${homeUrl}#contact`} class="after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-gradient-to-r after:from-accent after:to-accent-2 after:transition-all hover:after:w-full">Contact</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<style>
  /* 모바일 반응형 */
  @media (max-width: 768px) {
    .header-container {
      flex-direction: column;
    }
    
    nav ul {
      margin-top: 20px;
    }
    
    nav li {
      margin: 0 10px;
    }
  }
</style>
